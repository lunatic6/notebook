# 1. Java基础知识

## 1. 集合

### 1. HashMap

- 默认容量：16

- 最大容量：2^30

- 加载因子：0.75

- 扩容机制：

  - 是Node节点的数量大于**阈值**时才扩容，而不是数组中被占位置的数量
  - 添加后判断，而不是添加前

  

#### 1.7和1.8的区别

1. 底层结构：
   - 1.7 数组+链表
   - 1.8 数组+链表+红黑树
     - 并不是链表长度大于8就转化为红黑树
     - 链表长度大于8，并且当前桶的长度不小于64的时候转化为红黑树
     - 如果链表长度大于8，但桶长度小于64，就扩容一次
2. 数组创建：
   - 1.7 new HashMap的时候创建数组
   - 1.8 第一次put方法的时候创建数组
3. 插入方式：
   - 1.7头插法，resize的时候会死循环
   - 1.8尾插法
4. resize时的方式
   - 1.7中resize的时候，所有Entry重新hash & length - 1
   - 1.8中resize，计算新参与进来的二进制高位是否为1
     - 如果为1，新位置=旧位置+原先的容量
     - 如果为0，新位置=旧位置
5. 1.7底层Entry数组，1.8Node数组

